#!/bin/bash
echo "Building protostar..."

input="/home/vagrant/exercises/protostar/src/*"
output="/opt/protostar/bin" 

mkdir -p $output

for i in $input
do
	basename "$i"
	f="$(basename -- $i)"
	gcc -m64 -w -fno-stack-protector -z execstack -no-pie "$i" -o "$output/64${f%.*}"
    gcc -m32 -w -fno-stack-protector -z execstack -no-pie "$i" -o "$output/32${f%.*}"
done

find $output -type f -exec chmod u+x {} \;

echo "Done."
